<div class="deck-page">

    <!-- header -->
    <div class="container-fluid padding-none deck-header">
        <div class="container wrapper-lg deck-header-inner {{deck.playerClass.toLowerCase()}} clearfix">
            <div class="pull-left">
                <h1>{{deck.name}}</h1>
                <p>posted by <a href="./user/{{deck.author.username}}" class="m-r-sm">@{{deck.author.username}}</a><i class="fa fa-clock-o"></i> {{deck.createdDate | date:'mediumDate'}}</p>
            </div>
            <div class="pull-right">
                <!-- deck-votes -->
                <div class="deck-votes clearfix">
                    <div class="vote-count vote-large m-l-sm pull-right"><span><em ng-show="deck.votesCount > 0">+</em>{{deck.votesCount}}</span></div>
                    <div class="vote-count-btns vote-large pull-left">
                        <a href="#" class="btn-vote-up vote-large" ng-class="{active: deck.voted === 1}" ng-click="voteUp(deck)"><i class="fa fa-plus-square"></i></a>
                        <a href="#" class="btn-vote-down vote-large" ng-class="{active: deck.voted === -1}" ng-click="voteDown(deck)"><i class="fa fa-minus-square"></i></a>
                    </div>
                </div>
                <!-- / deck-votes -->
            </div>
        </div>
    </div>
    <!-- / header -->

    <div class="container container-dark">
        <div class="row">
            <div class="col-xs-12 m-t-md">
                
                <!-- deck right -->
                <div class="deck-right">
                    
                    <!-- mana curve -->
                    <div class="db-mana-curve clearfix">
                        <div class="db-mana-curve-title">
                            <a href="#" ng-click="show.mana = !show.mana">
                                <div class="pull-right">
                                    <i class="fa" ng-class="{ 'fa-angle-down': !show.mana, 'fa-angle-up': show.mana }"></i>
                                </div>
                                MANA CURVE
                            </a>
                        </div>
                        <div class="db-mana-curve-content clearfix" ng-show="show.mana">
                            <ul class="clearfix">
                                <li>
                                    <div class="db-mana-curve-amt">{{deck.manaCount(0)}}</div>
                                    <div class="db-mana-curve-bar"><span style="height: {{deck.manaCurve(0)}}px;"></span></div>
                                    <div class="db-mana-curve-num">0</div>
                                </li>
                                <li>
                                    <div class="db-mana-curve-amt">{{deck.manaCount(1)}}</div>
                                    <div class="db-mana-curve-bar"><span style="height: {{deck.manaCurve(1)}}px;"></span></div>
                                    <div class="db-mana-curve-num">1</div>
                                </li>
                                <li>
                                    <div class="db-mana-curve-amt">{{deck.manaCount(2)}}</div>
                                    <div class="db-mana-curve-bar"><span style="height: {{deck.manaCurve(2)}}px;"></span></div>
                                    <div class="db-mana-curve-num">2</div>
                                </li>
                                <li>
                                    <div class="db-mana-curve-amt">{{deck.manaCount(3)}}</div>
                                    <div class="db-mana-curve-bar"><span style="height: {{deck.manaCurve(3)}}px;"></span></div>
                                    <div class="db-mana-curve-num">3</div>
                                </li>
                                <li>
                                    <div class="db-mana-curve-amt">{{deck.manaCount(4)}}</div>
                                    <div class="db-mana-curve-bar"><span style="height: {{deck.manaCurve(4)}}px;"></span></div>
                                    <div class="db-mana-curve-num">4</div>
                                </li>
                                <li>
                                    <div class="db-mana-curve-amt">{{deck.manaCount(5)}}</div>
                                    <div class="db-mana-curve-bar"><span style="height: {{deck.manaCurve(5)}}px;"></span></div>
                                    <div class="db-mana-curve-num">5</div>
                                </li>
                                <li>
                                    <div class="db-mana-curve-amt">{{deck.manaCount(6)}}</div>
                                    <div class="db-mana-curve-bar"><span style="height: {{deck.manaCurve(6)}}px;"></span></div>
                                    <div class="db-mana-curve-num">6</div>
                                </li>
                                <li>
                                    <div class="db-mana-curve-amt">{{deck.manaCount(7)}}</div>
                                    <div class="db-mana-curve-bar"><span style="height: {{deck.manaCurve(7)}}px;"></span></div>
                                    <div class="db-mana-curve-num">7<span>+</span></div>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <!-- / mana curve -->
                    
                    <!-- deck -->
                    <div class="db-deck clearfix">
                        <div class="db-deck-header db-deck-{{deck.playerClass.toLowerCase()}}">
                            <div class="db-arena">
                                <span ng-show="!deck.arena">Constructed</span>
                                <span ng-show="deck.arena">Arena</span>
                            </div>
                        </div>
                        <div class="db-deck-cards">
                            <div class="db-deck-card" ng-class="{multi:item.qty > 1 || item.card.rarity == 'Legendary', 'mulligan-hide': mulliganHide(item)}" ng-repeat="item in deck.cards" data-tooltip-img="{{app.cdn}}cards/{{item.card.photos.large}}" data-tooltip-pos="left" hs-card>
                                <div class="db-deck-card-mana">{{item.card.cost}}</div>
                                <div class="db-deck-card-qty" ng-show="item.qty > 1">{{item.qty}}</div>
                                <div class="db-deck-card-legendary" ng-show="item.card.rarity == 'Legendary'"><i class="fa fa-star"></i></div>
                                <div class="db-deck-card-photo"><img ng-src="{{app.cdn}}cards/{{item.card.photos.small}}" alt=""></div>
                                <div class="db-deck-card-name">{{item.card.name}}</div>
                            </div>
                            <div class="db-deck-footer db-deck-{{deck.playerClass.toLowerCase()}}">
                                <div class="db-deck-footer-wrapper">
                                    <div class="db-deck-dust">{{deck.getDust()}}</div>
                                    <div class="dust-bottle-sm"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- / deck -->
                    
                </div>
                <!-- / deck right -->
                
                <!-- deck left -->
                <div class="deck-left">

                    <!-- deck description -->
                    <div class="deck-section">
                        <div class="deck-section-title clearfix">
                            <a href="#" ng-click="show.description = !show.description"><h3 class="pull-left">DESCRIPTION</h3></a>
                            <div class="m-l-md m-r-md pull-right">
                                <a href="#" ng-click="show.description = !show.description">
                                    <i class="fa" ng-class="{ 'fa-angle-down': !show.description, 'fa-angle-up': show.description }"></i>
                                </a>
                            </div>
                        </div>
                        <div class="deck-section-content" ng-show="show.description">
                            <p class="m-b-none">{{deck.description}}</p>
                        </div>
                    </div>
                    <!-- / deck description -->
                    
                    <!-- subscribe -->
                    <div class="deck-subscribe" ng-if="isPremium() && !app.user.isSubscribed() && !app.user.isAdmin() && !app.user.isProvider()">
                        <h1 class="deck-title">CONTINUE READING THIS DECK...</h1>
                        <h2>Signup for T/S Premium today!</h2>

                        <div premium-page></div>

                    </div>
                    <!-- / subscribe -->
                    
                    <!-- deck -->
                    <div ng-if="!isPremium() || app.user.isSubscribed() || app.user.isAdmin() || app.user.isProvider()">
                    
                        <!-- deck-mulligans -->
                        <div class="deck-section clearfix" ng-if="anyMulliganSet()">
                            <div class="deck-section-title clearfix">
                                <a href="#" ng-click="show.mulligans = !show.mulligans"><h3 class="pull-left">MULLIGANS</h3></a>
                                <div class="m-r-md pull-right clearfix">
                                    <ul class="deck-mulligan-classes pull-left clearfix">
                                        <li ng-class="{ active: currentMulligan.klass === class }" ng-repeat="class in classes">
                                            <a href="#" class="{{class.toLowerCase()}}" ng-class="{ active: isMulliganSet(getMulligan(class)) }" ng-click="setMulligan(getMulligan(class))" ng-tooltip title="{{class}}">{{class}}</a>
                                        </li>
                                    </ul>
                                    <div class="m-l-md pull-left" ng-show="currentMulligan">
                                        <a href="#" ng-click="show.mulligans = !show.mulligans">
                                            <i class="fa" ng-class="{ 'fa-angle-down': !show.mulligans, 'fa-angle-up': show.mulligans }"></i>
                                        </a>
                                    </div>
                                </div>
                            </div>

                            <div class="deck-section-content deck-mulligan-details pos-rl" ng-show="show.mulligans && currentMulligan">
                                <a href="#" class="mulligan-coin pull-left" ng-class="{active:coin}" ng-click="toggleCoin()"></a>
                                <a href="#" class="mulligan-close" ng-click="setMulligan(false)"><i class="fa fa-times"></i></a>
                                <div>
                                    <h3>{{currentMulligan.klass.toUpperCase()}} MULLIGAN</h3>
                                    <p ng-if="getMulliganCards().length"><span ng-repeat="card in getMulliganCards()"><span ng-if="$last && getMulliganCards().length > 1"> and </span>{{card.name}}<span ng-if="!$last">, </span></span></p>
                                    <p ng-if="getMulliganInstructions().length">{{getMulliganInstructions()}}</p>
                                    <p ng-if="!getMulliganCards().length">There is no mulligan set for <Strong>{{currentMulligan.klass}}</Strong> <span ng-if="coin">with</span><span ng-if="!coin">without</span> the coin.</p>
                                </div>
                                <div ng-if="getMulliganCards().length" class="hidden-xs">
                                    <div class="deck-mulligan-cards">
                                        <div class="deck-mulligan-card" ng-repeat="card in getMulliganCards()">
                                            <a href="#" data-tooltip-img="{{app.cdn}}cards/{{card.photos.large}}" style="left: {{cardLeft($index)}}%; z-index: {{$index}};" hs-card><img ng-src="{{app.cdn}}cards/{{card.photos.medium}}" alt=""></a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- / deck-mulligans -->

                        <!-- deck video -->
                        <div class="deck-section" ng-if="deck.video && deck.video.length">
                            <div class="deck-section-title clearfix">
                                <a href="#" ng-click="show.video = !show.video"><h3 class="pull-left">VIDEO</h3></a>
                                <div class="m-l-md m-r-md pull-right">
                                    <a href="#" ng-click="show.video = !show.video">
                                        <i class="fa" ng-class="{ 'fa-angle-down': !show.video, 'fa-angle-up': show.video }"></i>
                                    </a>
                                </div>
                            </div>
                            <div class="deck-section-content unpadded" ng-show="show.video">
                                <div class="deck-video" ng-bind-html="getVideo()"></div>
                            </div>
                        </div>
                        <!-- / deck video -->

                        <!-- deck-against -->
                        <div class="deck-section" ng-if="hasStrong() || hasWeak() || deck.against.instructions.length">
                            <div class="deck-section-title clearfix">
                                <a href="#" ng-click="show.matchups = !show.matchups"><h3 class="pull-left">MATCH-UPS</h3></a>
                                <div class="m-l-md m-r-md pull-right">
                                    <a href="#" ng-click="show.matchups = !show.matchups">
                                        <i class="fa" ng-class="{ 'fa-angle-down': !show.matchups, 'fa-angle-up': show.matchups }"></i>
                                    </a>
                                </div>
                            </div>
                            <div class="deck-section-content unpadded" ng-show="show.matchups">
                                <div class="deck-against">
                                    <div class="deck-against-strong">
                                        <h3>STRONG AGAINST</h3>
                                        <ul class="deck-against-icons clearfix" ng-if="hasStrong()">
                                            <li ng-repeat="strong in deck.against.strong" ng-show="strong.isStrong">
                                                <span class="class-icon small active {{strong.klass.toLowerCase()}}" ng-tooltip title="{{strong.klass}}"></span>
                                            </li>
                                        </ul>
                                        <p ng-if="!hasStrong()">The deck has no classes flagged for strong against.</p>
                                    </div>
                                    <div class="deck-against-weak">
                                        <h3>WEAK AGAINST</h3>
                                        <ul class="deck-against-icons clearfix" ng-if="hasWeak()">
                                            <li ng-repeat="weak in deck.against.weak" ng-show="weak.isWeak">
                                                <span class="class-icon small active {{weak.klass.toLowerCase()}}" ng-tooltip title="{{weak.klass}}"></span>
                                            </li>
                                        </ul>
                                        <p ng-if="!hasWeak()">The deck has no classes flagged for weak against.</p>
                                    </div>
                                    <p ng-if="deck.against.instructions.length">{{deck.against.instructions}}</p>
                                </div>
                            </div>
                        </div>
                        <!-- / deck-against -->

                        <!-- deck-gameplay -->
                        <div class="deck-section" ng-if="deck.contentEarly.length || deck.contentMid.length || deck.contentLate.length">
                            <div class="deck-section-title clearfix">
                                <a href="#" ng-click="show.gameplay = !show.gameplay"><h3 class="pull-left">GAMEPLAY DETAILS</h3></a>
                                <div class="m-l-md m-r-md pull-right">
                                    <a href="#" ng-click="show.gameplay = !show.gameplay">
                                        <i class="fa" ng-class="{ 'fa-angle-down': !show.gameplay, 'fa-angle-up': show.gameplay }"></i>
                                    </a>
                                </div>
                            </div>
                            <div class="deck-section-content" ng-show="show.gameplay">
                                <div ng-if="deck.contentEarly.length">
                                    <h3>EARLY GAME</h3>
                                    <p class="pos-rl" ng-bind-html="getContent(deck.contentEarly)"></p>
                                </div>
                                <div ng-if="deck.contentMid.length">
                                    <h3>MID GAME</h3>
                                    <p class="pos-rl" ng-bind-html="getContent(deck.contentMid)"></p>
                                </div>
                                <div ng-if="deck.contentLate.length">
                                    <h3>LATE GAME</h3>
                                    <p class="pos-rl" ng-bind-html="getContent(deck.contentLate)"></p>
                                </div>
                            </div>
                        </div>
                        <!-- / deck-gameplay -->

                        <!-- stats -->
                        <!--
                        <div class="deck-section">
                            <div class="deck-section-title clearfix">
                                <a href="#" ng-click="show.stats = !show.stats"><h3 class="pull-left">VITAL STATS</h3></a>
                                <div class="m-l-md m-r-md pull-right">
                                    <a href="#" ng-click="show.stats = !show.stats">
                                        <i class="fa" ng-class="{ 'fa-angle-down': !show.stats, 'fa-angle-up': show.stats }"></i>
                                    </a>
                                </div>
                            </div>
                            <div class="deck-section-content" ng-show="show.stats">
                                <div class="row">
                                    <div class="col-xs-12 col-sm-4">
                                        <canvas id="doughnut" class="chart chart-doughnut" data="data" labels="labels" colours="charts.colors"></canvas>
                                    </div>
                                    <div class="col-xs-12 col-sm-4">
                                        <canvas id="doughnut" class="chart chart-doughnut" data="data" labels="labels"></canvas>
                                    </div>
                                    <div class="col-xs-12 col-sm-4">
                                        <canvas id="doughnut" class="chart chart-doughnut" data="data" labels="labels"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        -->
                        <!-- / stats -->

                        <!-- comments -->
                        <comment-section commentable="deck" service="DeckService"></comment-section>
                        <!-- / commments -->
                        
                    </div>
                    <!-- / deck -->
                    
                </div>
            </div>
        </div>
    </div>
</div>
