<alert-box theme="admin"></alert-box>

<div class="panel panel-default br-none">
    <form name="form" role="form" class="form-horizontal">
    <div class="panel-heading  wrapper-md clearfix">
        <div class="row">
            <div class="col-xs-12 panel-label p-r-none">
                <label class="control-label pull-left">
                    <h3>Edit Thread</h3>
                </label>
            </div>
        </div>
    </div>
    <div class="panel-body">
        <div class="form-group m-b-xs">
            <label for="category" class="col-sm-2 control-label">Category</label>
            <div class="col-sm-10">
                <select id="category" name="category" class="form-control" ng-options="category.id as category.title for category in selectCategories" ng-model="thread.forumCategoryId" required></select>
            </div>
        </div>
        <div class="form-group m-b-xs">
            <label for="title" class="col-sm-2 control-label">Title</label>
            <div class="col-sm-10">
                <input type="text" id="title" name="title" value="" class="form-control" ng-model="thread.title" ng-keyup="setSlug()" required>
            </div>
        </div>
        <div class="form-group m-b-xs">
            <label for="slug" class="col-sm-2 control-label">URL</label>
            <div class="col-sm-10">
                <div class="input-group">
                    <span class="input-group-btn">
                        <button type="button" class="btn btn-default" ng-class="{active: thread.slug.linked}" ng-click="toggleSlugLink()"><i class="fa" ng-class="{'fa-link': thread.slug.linked, 'fa-unlink': !thread.slug.linked}"></i></button>
                    </span>
                    <input type="text" id="slug" name="slug" value="" class="form-control" ng-model="thread.slug.url" required ng-readonly="thread.slug.linked">
                </div>
            </div>
        </div>
        <div class="form-group m-b-xs">
            <label for="description" class="col-sm-2 control-label">Description</label>
            <div class="col-sm-10">
                <textarea id="description" name="description" class="form-control" ng-model="thread.description"></textarea>
            </div>
        </div>
        <div class="form-group m-b-xs">
            <label for="active" class="col-sm-2 control-label">Active</label>
            <div class="col-sm-10">
                <select id="active" name="active" class="form-control" ng-options="active.value as active.name for active in threadActive" ng-model="thread.isActive" required></select>
            </div>
        </div>
    </div>
    <div class="panel-footer clearfix">
        <div class="col-sm-10 col-sm-offset-2">
            <button type="submit" class="btn admin-btn-blue pull-right" 
                    ng-disabled="fetching || form.$invalid" ng-click="editThread(thread)">
                <span ng-if="!fetching">Update Thread</span>
                <span ng-if="fetching">Updating <i class="fa fa-spinner fa-pulse"></i></span>
            </button>
        </div>
    </div>
    </form>
    </div>
</div>
